webpackJsonp([11],{O5r9:function(t,e){},sq3U:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l=(a("mw3O"),{data:function(){return{search_obj:{pname:null,patientId:null,pageNum:1,pageSize:10},diagnoseLabels:"诊断标签：",multipleSelectionAll:[],multipleSelection:[],idKey:"inquiryId",tableData:{list:[],pageNum:1,pageSize:10,total:0}}},created:function(){this.initPage()},methods:{rowClassname:function(){return"rowClassname"},headerClassname:function(){return"headerClassname"},handleClick:function(t){var e={pId:t.pId,inquiryId:t.inquiryId,lastinquiryId:"",pname:this.search_obj.pname},a=new Object;a.path="bryfpage",a.data=e,this.$store.dispatch("setPathParams",n()(a));var i=new Object;i.path="grblglpage",i.data=this.search_obj,this.$store.dispatch("setPrePathParams",n()(i)),this.$common.GotoPage("bryfpage",e,this)},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.changePageCoreRecordData(),this.search_obj.pageNum=t,this.getBrList(this.search_obj)},handleSelectionChange:function(t){var e=this;this.multipleSelection=t,setTimeout(function(){e.changePageCoreRecordData()},50)},setSelectRow:function(){if(this.multipleSelectionAll&&!(this.multipleSelectionAll.length<=0)){var t=this.idKey,e=[];this.multipleSelectionAll.forEach(function(a){e.push(a[t])}),this.$refs.table.clearSelection();for(var a=0;a<this.tableData.list.length;a++)e.indexOf(this.tableData.list[a][t])>=0&&this.$refs.table.toggleRowSelection(this.tableData.list[a],!0)}},changePageCoreRecordData:function(){var t=this.idKey,e=this;if(this.multipleSelectionAll.length<=0)this.multipleSelectionAll=this.multipleSelection;else{var a=[];this.multipleSelectionAll.forEach(function(e){a.push(e[t])});var i=[];this.multipleSelection.forEach(function(n){i.push(n[t]),a.indexOf(n[t])<0&&e.multipleSelectionAll.push(n)});var n=[];this.tableData.list.forEach(function(e){i.indexOf(e[t])<0&&n.push(e[t])}),n.forEach(function(i){if(a.indexOf(i)>=0)for(var n=0;n<e.multipleSelectionAll.length;n++)if(e.multipleSelectionAll[n][t]==i){e.multipleSelectionAll.splice(n,1);break}})}},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},initPage:function(){var t=JSON.parse(window.localStorage.getItem("pathParams"));""!=t.data.pId&&t.data.pId&&(this.search_obj.patientId=t.data.pId),""!=t.data.patientId&&t.data.patientId&&(this.search_obj.patientId=t.data.patientId),""!=t.data.pname&&(this.search_obj.pname=t.data.pname),t.data.pageNum&&(this.search_obj.pageNum=t.data.pageNum),t.data.pageSize&&(this.search_obj.pageSize=t.data.pageSize),this.getBrDiagnoseLabels(this.search_obj.patientId),this.getBrList(this.search_obj)},getBrDiagnoseLabels:function(t){var e=this;e.$http.get("/inquiry/getOnePatientLabels?patientId="+t).then(function(t){if("1"==t.code){var a=n()(t.data.diagnoseLabels);a=a.replace(/[\[\]\"]*/g,""),e.diagnoseLabels=e.diagnoseLabels+a}else e.$common.openErrorMsgBox(t.msg,e)}).catch(function(t){e.$common.openErrorMsgBox(t,e)})},getBrList:function(t){var e=this;e.$http.get("/MrManage/getMrList",{params:t}).then(function(t){"1"==t.code?"[]"!=n()(t.data.pageInfo.list)&&(e.tableData=t.data.pageInfo,setTimeout(function(){e.setSelectRow()},50)):e.$common.openErrorMsgBox(t.msg,e)}).catch(function(t){e.$common.openErrorMsgBox(t,e)})},GobackPage:function(){this.$common.GoBackPrePage("grblglpage",this.search_obj,this)},exportBlList:function(){var t=this,e={inquiryIdList:[],all:!1,patientId:null};if("[]"==n()(this.multipleSelectionAll))return t.$common.openErrorMsgBox("请选中要导出的病历信息",t),!1;for(var a=0;a<this.multipleSelectionAll.length;a++)e.inquiryIdList.push(this.multipleSelectionAll[a].inquiryId);console.log(n()(e));var i=t.$common.openLoading("病历导出中，请耐心等待",t);t.$http.post("/dataStatistics/getInquiryInfoList",e).then(function(e){i.close(),"1"==e.code?e.data.inquiryInfo&&"{}"!=n()(e.data.inquiryInfo)&&t.$exportPrint(e.data.inquiryInfo,{}):t.$common.openErrorMsgBox(e.msg,t)}).catch(function(e){i.close(),t.$common.openErrorMsgBox(e,t)})}}}),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grblgl-container"},[a("div",{staticClass:"search-row"},[a("div",{staticClass:"search-row-input-item"},[a("el-input",{attrs:{readonly:!0},model:{value:t.diagnoseLabels,callback:function(e){t.diagnoseLabels=e},expression:"diagnoseLabels"}})],1)]),t._v(" "),a("div",{staticClass:"table-div-continer"},[a("div",{staticClass:"table-continer"},[a("el-table",{ref:"table",staticStyle:{width:"968px",border:"1px solid #ebeef5","overflow-y":"auto"},attrs:{"tooltip-effect":"dark",data:t.tableData.list,"header-row-class-name":t.headerClassname,"row-class-name":t.rowClassname,stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"96"}}),t._v(" "),a("el-table-column",{attrs:{prop:"times",label:"序号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pName",label:"姓名",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inquiryDate",label:"最近就诊时间",width:"260"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"btn-font-default",attrs:{type:"text"},on:{click:function(a){t.handleClick(e.row)}}},[t._v("查看病例")])]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"foot-container"},[a("div",{staticClass:"page-container"},[a("el-pagination",{attrs:{background:"","current-page":t.search_obj.pageNum,"page-size":t.search_obj.pageSize,layout:"total, prev, pager, next, jumper",total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticClass:"search-row-btn-group"},[a("el-button",{staticClass:"btn-blue",on:{click:t.exportBlList}},[t._v("导出病历")]),t._v(" "),a("el-button",{staticClass:"btn-default",on:{click:function(e){t.GobackPage()}}},[t._v("返回")])],1)])])},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(t){a("O5r9")},null,null);e.default=s.exports}});
//# sourceMappingURL=11.83e2dbc96f9ce86e381e.js.map