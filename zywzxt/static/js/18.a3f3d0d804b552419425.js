webpackJsonp([18],{"56lb":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{dialogpriceVisible:!1,search_obj:{},changes:[{id:"",medicineName:"",unitPrice:"",updateDate:""}],keyWords:"",medicinelist:[{medicineName:1,unitPrice:1,source:10,medicineId:""}]}},created:function(){document.title="药品管理",this.getmedicine()},methods:{getpricechange:function(e){var t=this;t.dialogpriceVisible=!0;var i=t.medicinelist[e];t.$http.get("/medicineManage/priceChange",{params:{medicineId:i.medicineId}}).then(function(e){1==e.code&&(t.changes=e.data.changes);for(var i=t.$echarts.init(document.getElementById("price")),n=[],c=[],o=0;o<t.changes.length;o++)n.push(t.changes[o].updateDate),c.push(t.changes[o].unitPrice);i.setOption({title:{text:"价格走势"},legend:{textStyle:{fontSize:30}},tooltip:{},xAxis:{data:n,axisLabel:{interval:0,rotate:10,show:!0,textStyle:{fontSize:20}}},yAxis:{axisLabel:{show:!0,textStyle:{fontSize:20}}},series:[{symbol:"circle",symbolSize:10,name:"价格",type:"line",data:c,itemStyle:{normal:{label:{textStyle:{fontSize:20},show:!0}}}}]})}).catch(function(e){console.log(e)})},removemedicine:function(e){var t=this;this.$confirm("确定删除此药品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,customClass:"qcMessage",type:"warning"}).then(function(){var i=t.medicinelist[e];""==i.medicineId||null==i.medicineId?t.deleteRow(e):t.$http.delete("/medicineManage/deleteMedicine",{data:{medicineId:i.medicineId}}).then(function(i){1==i.code&&t.deleteRow(e)}).catch(function(){t.$message.error("删除失败")})})},updatemedicine:function(){for(var e=this,t=0;t<e.medicinelist.length;t++)""!=e.medicinelist[t].medicineId&&null!=e.medicinelist[t].medicineId||(e.medicinelist[t].medicineId=e.medicinelist[t].medicineName);this.$http.post("/medicineManage/updateMedicineList",e.medicinelist).then(function(t){"1"==t.code?(e.$common.openSuccessMsgBox("修改成功",e),e.getmedicine()):e.$common.openErrorMsgBox(t.msg,e)}).catch(function(e){console.log(e)})},searchmedicine:function(){var e=this,t=e.keyWords;console.log("参数",t),e.$http.get("/medicineManage/findMedicineList",{params:{keyWord:t}}).then(function(t){console.log(t),1==t.code?(e.medicinelist=t.data.medicinelist,console.log("药品"+this.medicinelist)):e.$common.openErrorMsgBox(t.msg,e)}).catch(function(t){e.$common.openErrorMsgBox(t,e)})},getmedicine:function(){var e=this;this.$http.get("/medicineManage/getMedicineList").then(function(t){1==t.code&&(e.medicinelist=t.data.medicinelist)}).catch(function(e){console.log(e)})},addRow:function(){this.medicinelist.push({medicineName:"",unitPrice:"",source:"",medicineId:""})},deleteRow:function(e){this.medicinelist.splice(e,1)},rowClassname:function(){return"rowClassname"},headerClassname:function(){return"headerClassname"},handleClick:function(e){console.log(e)}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ypgl-container"},[i("div",{staticClass:"search-row"},[i("div",{staticClass:"search-row-input-item"},[i("el-input",{attrs:{placeholder:"请输入药品名"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchmedicine(t):null}},model:{value:e.keyWords,callback:function(t){e.keyWords=t},expression:"keyWords"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchmedicine},slot:"append"})],1)],1),e._v(" "),i("div",{staticClass:"addmedicine"},[i("el-button",{staticClass:"button-size",attrs:{type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("药品新增")])],1)]),e._v(" "),i("div",{staticClass:"table-continer"},[i("el-table",{staticStyle:{border:"1px solid #ebeef5","overflow-y":"auto"},attrs:{data:e.medicinelist,"header-row-class-name":e.headerClassname,"row-class-name":e.rowClassname,stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"medicineName",label:"药名",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{staticClass:"new-ypmc",model:{value:t.row.medicineName,callback:function(i){e.$set(t.row,"medicineName",i)},expression:"scope.row.medicineName"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"unitPrice",label:"价格（元/g）",width:"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{staticClass:"new-ypmc",model:{value:t.row.unitPrice,callback:function(i){e.$set(t.row,"unitPrice",i)},expression:"scope.row.unitPrice"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"source",label:"来源",width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{staticClass:"new-ypmc",model:{value:t.row.source,callback:function(i){e.$set(t.row,"source",i)},expression:"scope.row.source"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"600"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"btn-font-default bnt-font-color",attrs:{type:"text"},on:{click:function(i){e.removemedicine(t.$index)}}},[e._v("删除药品")]),e._v(" "),i("el-button",{staticClass:"btn-font-default bnt-font-color",attrs:{type:"text"},on:{click:function(i){e.getpricechange(t.$index)}}},[e._v("价格走势")])]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:"价格走势",visible:e.dialogpriceVisible},on:{"update:visible":function(t){e.dialogpriceVisible=t}}},[i("div",{staticStyle:{width:"1000px",height:"500px"},attrs:{id:"price"}})])],1),e._v(" "),i("div",{staticClass:"foot"},[i("el-button",{staticClass:"button-size",attrs:{type:"primary"},on:{click:e.updatemedicine}},[e._v("确认修改")])],1)])},staticRenderFns:[]};var o=i("VU/8")(n,c,!1,function(e){i("Rn4f")},null,null);t.default=o.exports},Rn4f:function(e,t){}});
//# sourceMappingURL=18.a3f3d0d804b552419425.js.map