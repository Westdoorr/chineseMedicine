webpackJsonp([8],{EeBy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return{totalCount:0,userlist:[],listLoading:!1,listQuery:{pageNum:1,pageRow:50},dialogStatus:"create",dialogFormVisible:!1,textMap:{update:"修改用户",create:"新建用户"},tempUser:{username:"",nickname:"",password:"",checkpassword:"",role:""},options:[{value:2,label:"高级用户"},{value:3,label:"普通用户"}]}},created:function(){document.title="用户管理",this.getusers()},methods:{passwordCheck:function(){this.tempUser.checkpassword!==this.tempUser.password&&this.$message({type:"error",message:"密码不一致"})},getusers:function(){var e,t=this;t.$http.get("/userManage/getUserList").then(function(s){1==s.code&&(e=s.data.userlist);for(var r=0;r<e.length;r++)1==e[r].role&&e.splice(r,1),t.userlist=e}).catch(function(e){console.log(e)})},createUser:function(){var e=this;e.tempUser.checkpassword!==e.tempUser.password?e.$message({type:"error",message:"密码不一致"}):this.$http.post("/userManage/addUser",{username:e.tempUser.username,password:e.tempUser.password,nickname:e.tempUser.nickname,role:e.tempUser.role}).then(function(t){1==t.code&&(e.dialogFormVisible=!1,e.getusers())}).catch(function(e){console.log(e)})},updateUser:function(){var e=this;e.tempUser.checkpassword!==e.tempUser.password?e.$message({type:"error",message:"密码不一致"}):this.$http.post("/userManage/updateUser",{username:e.tempUser.username,password:e.tempUser.password,nickname:e.tempUser.nickname,role:e.tempUser.role}).then(function(t){1==t.code&&(e.dialogFormVisible=!1,e.getusers())}).catch(function(e){console.log(e)})},showUpdate:function(e){var t=this.userlist[e];this.tempUser.username=t.username,this.tempUser.nickname=t.nickname,this.tempUser.role=t.role,this.tempUser.password="",this.tempUser.checkpassword="",this.dialogStatus="update",this.dialogFormVisible=!0},showCreate:function(){this.tempUser.username="",this.tempUser.password="",this.tempUser.nickname="",this.tempUser.roleId="",this.tempUser.userId="",this.dialogStatus="create",this.dialogFormVisible=!0},removeUser:function(e){var t=this;this.$confirm("确定删除此用户?","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then(function(){var s=t.userlist[e];s.deleteStatus="2",t.$http.delete("/userManage/deleteUser",{params:{username:s.username}}).then(function(e){1==e.code&&t.getusers()}).catch(function(){t.$message.error("删除失败")})})},rowClassname:function(){return"rowClassname"},headerClassname:function(){return"headerClassname"},handleClick:function(e){console.log(e)},opencomfigMethod:function(e,t,s){this.$common.openComfigDialog(e,t,s,this)}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"brgl-container"},[s("div",{staticClass:"search-row"},[s("div",{staticClass:"addmedicine"},[s("el-button",{staticClass:"button-size",attrs:{type:"primary"},on:{click:e.showCreate}},[e._v("添加用户")])],1)]),e._v(" "),s("div",{staticClass:"table-continer"},[s("el-table",{staticStyle:{border:"1px solid #ebeef5","overflow-y":"auto"},attrs:{data:e.userlist,"header-row-class-name":e.headerClassname,"row-class-name":e.rowClassname,stripe:"","default-sort":{prop:"date",order:"descending"}}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{prop:"username",label:"用户名",sortable:"",width:"400"}}),e._v(" "),s("el-table-column",{attrs:{prop:"nickname",label:"姓名",sortable:"",width:"320"}}),e._v(" "),s("el-table-column",{attrs:{label:"角色",sortable:"",prop:"role",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1===t.row.role?"管理员":2===t.row.role?"高级用户":3===t.row.role?"普通用户":"")+"\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"管理",width:"700"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticClass:"btn-font-default bnt-font-color",attrs:{type:"text"},on:{click:function(s){e.showUpdate(t.$index)}}},[e._v("修改")]),e._v(" "),s("el-button",{staticClass:"btn-font-default bnt-font-color",attrs:{type:"text"},on:{click:function(s){e.removeUser(t.$index)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),s("el-dialog",{staticClass:"add-user",attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{staticClass:"small-space",staticStyle:{width:"600px","margin-left":"50px","font-size":"30px"},attrs:{model:e.tempUser,"label-position":"left","label-width":"150px",size:"medium"}},["create"==e.dialogStatus?s("el-form-item",{attrs:{label:"用户名",required:""}},[s("el-input",{attrs:{type:"text",width:"350px"},model:{value:e.tempUser.username,callback:function(t){e.$set(e.tempUser,"username",t)},expression:"tempUser.username"}})],1):e._e(),e._v(" "),"create"==e.dialogStatus?s("el-form-item",{attrs:{label:"密码",required:""}},[s("el-input",{attrs:{type:"password"},model:{value:e.tempUser.password,callback:function(t){e.$set(e.tempUser,"password",t)},expression:"tempUser.password"}})],1):s("el-form-item",{attrs:{label:"新密码"}},[s("el-input",{attrs:{type:"password",placeholder:"不填则表示不修改"},model:{value:e.tempUser.password,callback:function(t){e.$set(e.tempUser,"password",t)},expression:"tempUser.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码"}},[s("el-input",{attrs:{type:"password",placeholder:"不填则表示不修改"},on:{blur:e.passwordCheck},model:{value:e.tempUser.checkpassword,callback:function(t){e.$set(e.tempUser,"checkpassword",t)},expression:"tempUser.checkpassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色",required:""}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.tempUser.role,callback:function(t){e.$set(e.tempUser,"role",t)},expression:"tempUser.role"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"姓名",required:""}},[s("el-input",{attrs:{type:"text"},model:{value:e.tempUser.nickname,callback:function(t){e.$set(e.tempUser,"nickname",t)},expression:"tempUser.nickname"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?s("el-button",{attrs:{type:"primary"},on:{click:e.createUser}},[e._v("创 建")]):s("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(r,a,!1,function(e){s("Ih0w"),s("KxCB")},null,null);t.default=o.exports},Ih0w:function(e,t){},KxCB:function(e,t){}});
//# sourceMappingURL=8.ca51877d6c5f13e5525f.js.map