webpackJsonp([2],{"8GtK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=a("bOdI"),i=a.n(n),l=a("mvHQ"),r=a.n(l),o={data:function(){return{wzqkpage:"wzqkpage",rangeDate:null,search_obj:{startDate:null,endDate:null,medicine:null,pageNum:1,pageSize:500},tableData:{list1:[],list2:[],list3:[],list4:[]}}},created:function(){this.initPage()},watch:{rangeDate:function(t,e){this.rangeDate?(this.search_obj.startDate=this.$common.dateFormatStr(this.rangeDate[0],"yyyy-MM-dd"),this.search_obj.endDate=this.$common.dateFormatStr(this.rangeDate[1],"yyyy-MM-dd")):(this.search_obj.startDate=null,this.search_obj.endDate=null)}},methods:(s={downLoad:function(){var t={patientId:brid};this.$http.post("/inquiry/newInquiry",t).then(function(t){var e=new Blob([res.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),a=document.createElement("a"),s=window.URL.createObjectURL(e);a.href=s,a.download="任务统计.xls",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)}).catch(function(t){console.log(t)})},rowClassname:function(){return"rowClassname"},headerClassname:function(){return"headerClassname"},gotoWzqkPage:function(t){var e={path:t,data:{}};this.$store.dispatch("setPathParams",r()(e));var a={path:"yytjpage",data:this.search_obj};this.$store.dispatch("setPrePathParams",r()(a)),this.$common.GotoPage(t,e,this)},initPage:function(){var t=JSON.parse(window.localStorage.getItem("pathParams"));t.data.pageNum&&(this.search_obj.pageNum=t.data.pageNum),t.data.pageSize&&(this.search_obj.pageSize=t.data.pageSize),t.data.startDate&&(this.search_obj.startDate=t.data.startDate),t.data.endDate&&(this.search_obj.endDate=t.data.endDate),t.data.medicine&&(this.search_obj.medicine=t.data.medicine),this.getYytjList()},getYytjList:function(){var t=this,e=this.search_obj;t.$http.get("/dataStatistics/drugUse",{params:e}).then(function(e){console.log(e),"1"==e.code?t.setThreeList(e.data.pageInfo.list):t.$common.openErrorMsgBox(e.msg,t)}).catch(function(e){t.$common.openErrorMsgBox(e,t)})}},i()(s,"gotoWzqkPage",function(t){var e={path:t,data:{}};this.$store.dispatch("setPathParams",r()(e));var a={path:"yytjpage",data:this.search_obj};this.$store.dispatch("setPrePathParams",r()(a)),this.$common.GotoPage(t,e,this)}),i()(s,"setThreeList",function(t){if(console.log(t.length),t.length>0){if("[]"!=r()(t))if(t.length%3!=0){var e=Math.floor(t.length/3),a=new Array,s=new Array,n=new Array,i=t.length%3;if(0!=e?(a=t.slice(0,e),s=t.slice(e,2*e),n=t.slice(2*e,3*e)):i=t.length,1==i){a.push(t[t.length-1]);var l=new Object;l.dose=null,l.medicine=null,s.push(l),(o=new Object).dose=null,o.medicine=null,n.push(o)}else{var o;a.push(t[t.length-2]),s.push(t[t.length-1]),(o=new Object).dose=null,o.medicine=null,n.push(o)}a=this.setYwListIndex(a,1),s=this.setYwListIndex(s,2),n=this.setYwListIndex(n,3),this.tableData.list1=a,this.tableData.list2=s,this.tableData.list3=n}else{var c=t.length/3;a=t.slice(0,c),s=t.slice(c,2*c),n=t.slice(2*c,t.length);a=this.setYwListIndex(a,1),s=this.setYwListIndex(s,2),n=this.setYwListIndex(n,3),this.tableData.list1=a,this.tableData.list2=s,this.tableData.list3=n}}else this.tableData.list1=[],this.tableData.list2=[],this.tableData.list3=[]}),i()(s,"setYwListIndex",function(t,e){if(t&&t.length>0)for(var a in t)t[a]&&t[a].yindex||(t[a].yindex=null);return t}),i()(s,"tableprint",function(){var t=document.getElementById("wzqktable"),e={};e.rangDate=(this.search_obj.startDate?this.search_obj.startDate:"")+" ~ "+(this.search_obj.endDate?this.search_obj.endDate:""),e.list1=this.tableData.list1,e.list2=this.tableData.list2,e.list3=this.tableData.list3,this.$tablePrint(t,{data:e,type:"2"})}),i()(s,"exportExcel",function(){var t=this,e="/dataStatistics/drugUseToExcel?startDate="+this.search_obj.startDate+"&endDate="+this.search_obj.endDate+"&medicine="+this.search_obj.medicine+"&pageNum=1&pageSize=500",a=t.$common.openLoading("病历word文档导出中，请耐心等待",t);t.$http.get(e,{responseType:"arraybuffer"}).then(function(t){console.log(e),console.log(t),a.close();var s=new Blob([t],{type:"application/vnd.ms-excel"}),n=URL.createObjectURL(s),i=document.createElement("a");i.href=n,i.setAttribute("download","用药统计.xlsx"),document.body.appendChild(i),i.click()}).catch(function(e){a.close(),t.$common.openErrorMsgBox(e,t)})}),s)},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sjtj-yytj-container"},[a("div",{staticClass:"search-row"},[a("div",{staticClass:"search-row-btn-group"},[a("el-button",{staticClass:"btn-default",staticStyle:{width:"100px"},on:{click:t.exportExcel}},[t._v("导出")])],1),t._v(" "),a("div",{staticClass:"search-row-btn-group"},[a("el-button",{staticClass:"btn-default wzqk-btn",on:{click:function(e){t.gotoWzqkPage(t.wzqkpage)}}},[t._v("每日问诊情况")]),t._v(" "),a("el-button",{staticClass:"btn-default yytj-btn"},[t._v("用药统计")])],1),t._v(" "),a("div",{staticClass:"search-input-item"},[a("el-input",{attrs:{placeholder:"请输入药名"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getYytjList(e):null}},model:{value:t.search_obj.medicine,callback:function(e){t.$set(t.search_obj,"medicine",e)},expression:"search_obj.medicine"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getYytjList},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"search-rangedate-item"},[a("el-date-picker",{staticClass:"yytj-range-date",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),t._v(" "),a("div",{staticClass:"search-row-btn-group"},[a("el-button",{staticClass:"btn-default",staticStyle:{width:"200px"},on:{click:t.tableprint}},[t._v("打印")])],1)]),t._v(" "),a("div",{staticClass:"table-continer"},[a("el-table",{attrs:{data:t.tableData.list1,"header-row-class-name":t.headerClassname,"row-class-name":t.rowClassname,stripe:""}},[a("el-table-column",{attrs:{prop:"yindex",label:"序号",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"medicine",label:"药名",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dose",label:"药量(g)",width:"176"}})],1),t._v(" "),a("el-table",{attrs:{data:t.tableData.list2,"header-row-class-name":t.headerClassname,"row-class-name":t.rowClassname,stripe:""}},[a("el-table-column",{attrs:{prop:"yindex",label:"序号",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"medicine",label:"药名",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dose",label:"药量(g)",width:"176"}})],1),t._v(" "),a("el-table",{attrs:{data:t.tableData.list3,"header-row-class-name":t.headerClassname,"row-class-name":t.rowClassname,stripe:""}},[a("el-table-column",{attrs:{prop:"yindex",label:"序号",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"medicine",label:"药名",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dose",label:"药量(g)",width:"176"}})],1)],1)])},staticRenderFns:[]};var d=a("VU/8")(o,c,!1,function(t){a("nS2r")},null,null);e.default=d.exports},"9bBU":function(t,e,a){a("mClu");var s=a("FeBl").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},C4MV:function(t,e,a){t.exports={default:a("9bBU"),__esModule:!0}},bOdI:function(t,e,a){"use strict";e.__esModule=!0;var s,n=a("C4MV"),i=(s=n)&&s.__esModule?s:{default:s};e.default=function(t,e,a){return e in t?(0,i.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},mClu:function(t,e,a){var s=a("kM2E");s(s.S+s.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},nS2r:function(t,e){}});
//# sourceMappingURL=2.9e66dd5054eb8d4e2155.js.map