webpackJsonp([0],{SldL:function(e,t){!function(t){"use strict";var i,n=Object.prototype,a=n.hasOwnProperty,l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",s=l.asyncIterator||"@@asyncIterator",o=l.toStringTag||"@@toStringTag",c="object"==typeof e,d=t.regeneratorRuntime;if(d)c&&(e.exports=d);else{(d=t.regeneratorRuntime=c?e.exports:{}).wrap=I;var u="suspendedStart",m="suspendedYield",f="executing",p="completed",h={},v={};v[r]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y($([])));g&&g!==n&&a.call(g,r)&&(v=g);var L=w.prototype=k.prototype=Object.create(v);b.prototype=L.constructor=w,w.constructor=b,w[o]=b.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(L),e},d.awrap=function(e){return{__await:e}},_(x.prototype),x.prototype[s]=function(){return this},d.AsyncIterator=x,d.async=function(e,t,i,n){var a=new x(I(e,t,i,n));return d.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(L),L[o]="Generator",L[r]=function(){return this},L.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},d.values=$,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=i),!!a}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var o=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(o&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var l=n;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var r=l?l.completion:{};return r.type=e,r.arg=t,l?(this.method="next",this.next=l.finallyLoc,h):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),A(i),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var a=n.arg;A(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:$(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=i),h}}}function I(e,t,i,n){var a=t&&t.prototype instanceof k?t:k,l=Object.create(a.prototype),r=new M(n||[]);return l._invoke=function(e,t,i){var n=u;return function(a,l){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===a)throw l;return C()}for(i.method=a,i.arg=l;;){var r=i.delegate;if(r){var s=D(r,i);if(s){if(s===h)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=f;var o=R(e,t,i);if("normal"===o.type){if(n=i.done?p:m,o.arg===h)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(n=p,i.method="throw",i.arg=o.arg)}}}(e,i,r),l}function R(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}function k(){}function b(){}function w(){}function _(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function x(e){var t;this._invoke=function(i,n){function l(){return new Promise(function(t,l){!function t(i,n,l,r){var s=R(e[i],e,n);if("throw"!==s.type){var o=s.arg,c=o.value;return c&&"object"==typeof c&&a.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,l,r)},function(e){t("throw",e,l,r)}):Promise.resolve(c).then(function(e){o.value=e,l(o)},r)}r(s.arg)}(i,n,t,l)})}return t=t?t.then(l,l):l()}}function D(e,t){var n=e.iterator[t.method];if(n===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=i,D(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var a=R(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=i),t.delegate=null,h):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function $(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=i,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:i,done:!0}}}(function(){return this}()||Function("return this")())},Xxa5:function(e,t,i){e.exports=i("jyFz")},exGp:function(e,t,i){"use strict";t.__esModule=!0;var n,a=i("//Fk"),l=(n=a)&&n.__esModule?n:{default:n};t.default=function(e){return function(){var t=e.apply(this,arguments);return new l.default(function(e,i){return function n(a,r){try{var s=t[a](r),o=s.value}catch(e){return void i(e)}if(!s.done)return l.default.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}},fTu6:function(e,t){},gi3s:function(e,t){},jyFz:function(e,t,i){var n=function(){return this}()||Function("return this")(),a=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,l=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=i("SldL"),a)n.regeneratorRuntime=l;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},tD33:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Xxa5"),a=i.n(n),l=i("//Fk"),r=i.n(l),s=i("exGp"),o=i.n(s),c=i("mvHQ"),d=i.n(c),u={name:"bryfpage",data:function(){return{allTotal:0,diagnoseLabels:null,d_isActive:!1,b_isActive:!1,is_display_xjzd:!1,is_display_zd:!1,is_display_fh:!0,options:[],yfdata:{pName:"",inquiryId:0,description:"",diagnoseLabel:null,age:0,gender:"",date:"",address:"",mainReList:[{amount:null,isStock:!0,remarks:"",mainMeList:null,recipeDetailList:[{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null},{detailId:0,recipeId:0,medicine:"",dose:0,remark:null}],viceReList:[{amount:null,isStock:!0,remarks:"先用，与主方同用",viceMeList:null,viceRecipeDetailList:[{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null}]},{amount:null,isStock:!0,remarks:"后用，与主方同用",viceMeList:null,viceRecipeDetailList:[{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null},{detailId:0,viceRecipeId:0,medicine:"",dose:0,remark:null}]}]}]},mbViceObj:{amount:14,isStock:!0,remarks:"副方备注",viceMeList:null,viceRecipeDetailList:[{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null}]},mbMainObj:{amount:28,isStock:!0,remarks:"",mainMeList:null,recipeDetailList:[{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null},{detailId:null,recipeId:null,medicine:"",dose:null,remark:null}],viceReList:[{amount:14,isStock:!0,remarks:"先用，与主方同用",viceMeList:null,viceRecipeDetailList:[{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null}]},{amount:14,isStock:!0,remarks:"后用，与主方同用",viceMeList:null,viceRecipeDetailList:[{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null},{detailId:null,viceRecipeId:null,medicine:"",dose:null,remark:null}]}]}}},computed:{getPersonInfo:function(){return this.yfdata.gender+" "+this.yfdata.resisdence+" "+this.yfdata.date+" "+this.yfdata.age+"岁 第"+this.yfdata.times+"次"}},beforeCreate:function(){},created:function(){this.initPage(),this.getyfDate()},watch:{},methods:{initPage:function(){var e=JSON.parse(window.localStorage.getItem("prePathParams"));this.is_display_xjzd=!0,"brglpage"==e.path||"grblglpage"==e.path?("new"!=e.data.xzfz&&(this.is_display_fh=!1,this.is_display_zd=!0),"grblglpage"==e.path&&"new"!=e.data.xzfz&&(this.is_display_xjzd=!1)):(this.is_display_fh=!0,this.is_display_zd=!1)},setActiveSyle:function(e){1==e?0==this.d_isActive?this.d_isActive=!0:this.d_isActive=!1:0==this.b_isActive?this.b_isActive=!0:this.b_isActive=!1},gotoLastPage:function(){var e=window.localStorage.getItem("prePathParams"),t=window.localStorage.getItem("pathParams");(t=JSON.parse(t)).path="brglpage",this.$store.dispatch("setPathParams",e),this.$store.dispatch("setPrePathParams",d()(t)),this.$common.GotoPage(JSON.parse(e).path,JSON.parse(e),this)},clearAllYw:function(){var e=new Array;e.push(this.mbMainObj),this.yfdata.mainReList=e,this.allTotal=this.getAllTotal(this.yfdata),this.$common.openSuccessMsgBox("清楚成功!",this)},getAllTotal:function(e){var t=e.mainReList,i=0;for(var n in t){var a=t[n];i+=a.amount&&""!=a.amount?parseInt(a.amount):0}return 0==i&&(i=null),i},setSubmitYfData:function(e){var t=JSON.parse(d()(e));for(var i in t.mainReList){var n=new Array;for(var a in console.log(i),t.mainReList[i].recipeDetailList)""!=t.mainReList[i].recipeDetailList[a].medicine&&n.push(t.mainReList[i].recipeDetailList[a].medicine);for(var l in t.mainReList[i].mainMeList=n,delete t.mainReList[i].recipeDetailList,t.mainReList[i].viceReList){var r=new Array,s=t.mainReList[i].viceReList[l].viceRecipeDetailList;for(var o in s)""!=s[o].medicine&&r.push(s[o].medicine);t.mainReList[i].viceReList[l].viceMeList=r,delete t.mainReList[i].viceReList[l].viceRecipeDetailList}}return t},SubmitDiagnoseLabels:function(){var e=this;return o()(a.a.mark(function t(){var i,n,l,s,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=JSON.parse(window.localStorage.getItem("pathParams")),(n={}).patientId=i.data.pId,n.inquiryId=i.data.inquiryId,e.diagnoseLabels?(l=e.diagnoseLabels.replace(/\uff0c/g,","),s=l.split(","),n.diagnoseLabels=s||null):n.diagnoseLabels=null,t.next=7,new r.a(function(t,i){e.$http.post("/inquiry/postDiagnoseLabels",n).then(function(e){t(e)}).catch(function(e){i(e)})});case 7:return o=t.sent,t.abrupt("return",o);case 9:case"end":return t.stop()}},t,e)}))()},submitYfData:function(){var e=this,t=this.$common.openLoading("正在新增/修改问诊信息，请稍候",e),i=e.setSubmitYfData(e.yfdata);this.SubmitDiagnoseLabels().then(function(n){void 0===n.code||"1"!=n.code?(t.close(),e.$common.openErrorMsgBox("基本信息的诊断标签保存失败！",e),!0):e.$http.post("/inquiry/postInquiryInfo",i).then(function(i){t.close(),"1"==i.code?(e.$common.openSuccessMsgBox("操作成功",e),e.openMegBox("是否打印处方","printYfPage")):e.$common.openErrorMsgBox(i.msg,e)}).catch(function(i){t.close(),setTimeout(function(){e.$common.openErrorMsgBox(i,e)},1e3)})},function(i){t.close(),e.$common.openErrorMsgBox(i,e)})},getfzYfData:function(){var e=this,t=JSON.parse(window.localStorage.getItem("pathParams")),i=t.data.inquiryId,n=t.data.lastinquiryId;if(n){e.$http.get("/inquiry/getInquiryLabels?inquiryId="+n).then(function(t){if("1"==t.code){var i=d()(t.data.diagnoseLabels);e.diagnoseLabels="[]"==i?null:i.replace(/[\[\]\"]*/g,"")}else e.$common.openErrorMsgBox(t.msg,e)}).catch(function(t){e.$common.openErrorMsgBox(t,e)});var a="/inquiry/getInquiryInfo?inquiryId="+n;e.$http.get(a).then(function(t){if("1"==t.code){var n=t.data.inquiryInfo;if("[]"===d()(n.mainReList)){var a=new Array,l=JSON.parse(d()(e.mbMainObj));a.push(l),n.mainReList=a,n.inquiryId=i,n=e.setDefaultAmount(n),e.yfdata=n,e.allTotal=e.getAllTotal(n)}else n=e.setDefaultAmount(n),(n=e.normalYwArry(n)).inquiryId=i,e.yfdata=n,e.allTotal=e.getAllTotal(n)}else e.$common.openErrorMsgBox(t.msg,e)}).catch(function(e){console.log(e)})}},getCzYfData:function(){var e=this,t=JSON.parse(window.localStorage.getItem("pathParams")).data.inquiryId;if(t){e.$http.get("/inquiry/getInquiryLabels?inquiryId="+t).then(function(t){if("1"==t.code){var i=d()(t.data.diagnoseLabels);e.diagnoseLabels="[]"==i?null:i.replace(/[\[\]\"]*/g,"")}else e.$common.openErrorMsgBox(t.msg,e)}).catch(function(t){e.$common.openErrorMsgBox(t,e)});var i="/inquiry/getInquiryInfo?inquiryId="+t;e.$http.get(i).then(function(t){if("1"==t.code){var i=t.data.inquiryInfo;if("[]"===d()(i.mainReList)){var n=new Array,a=JSON.parse(d()(e.mbMainObj));n.push(a),i.mainReList=n,i=e.setDefaultAmount(i),e.yfdata=i,e.allTotal=e.getAllTotal(i)}else i=e.normalYwArry(i),i=e.setDefaultAmount(i),e.yfdata=i,e.allTotal=e.getAllTotal(i)}else e.$common.openErrorMsgBox(t.msg,e)}).catch(function(t){e.$common.openErrorMsgBox(t,e)})}},getyfDate:function(){var e=JSON.parse(window.localStorage.getItem("pathParams")).data.lastinquiryId;""!=e&&e?this.getfzYfData():this.getCzYfData()},printYfPage:function(){var e=this,t=e.$common.openLoading("请稍后!",e),i="/inquiry/getInquiryInfo?inquiryId="+JSON.parse(window.localStorage.getItem("pathParams")).data.inquiryId;e.$http.get(i).then(function(i){if(t.close(),"1"==i.code){var n=i.data.inquiryInfo;if("[]"===d()(n.mainReList)){var a=new Array,l=JSON.parse(d()(e.mbMainObj));a.push(l),n.mainReList=a,n=e.setDefaultAmount(n),e.yfdata=n,e.allTotal=e.getAllTotal(n)}else n=e.normalYwArry(n),n=e.setDefaultAmount(n),e.yfdata=n,e.allTotal=e.getAllTotal(n);e.yfdata.allTotal=e.allTotal,e.$Print(e.yfdata,{n_height:760})}else e.$common.openErrorMsgBox(i.msg,e)}).catch(function(t){e.$common.openErrorMsgBox(t,e)})},openMegBox:function(e,t,i,n){var a=this;this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"deleteZf"===t?a.deleteZf(i):"deleteFf"===t?a.deleteFf(i,n):"printYfPage"===t&&a.printYfPage()}).catch(function(){a.$message({type:"info",message:"操作已取消"})})},addZf:function(e,t){var i=JSON.parse(d()(this.mbMainObj));this.yfdata.mainReList.push(i),this.allTotal=this.getAllTotal(this.yfdata),this.$common.openSuccessMsgBox("主方新增成功!",this)},deleteFf:function(e,t){this.yfdata.mainReList[e].viceReList.splice(t,1),this.updateZfAmount(e),this.$common.openSuccessMsgBox("副方移除成功!",this)},deleteZf:function(e){this.yfdata.mainReList.splice(e,1),this.allTotal=this.getAllTotal(this.yfdata),this.$common.openSuccessMsgBox("主方移除成功!",this)},updateMainMe:function(e,t){var i=!0,n=this.yfdata.mainReList[e].recipeDetailList;if(n&&n.length>0){for(var a in n)if(""==n[a].medicine){i=!1,this.$set(this.yfdata.mainReList[e].recipeDetailList[a],"medicine",t);break}i&&(this.yfdata.mainReList[e].recipeDetailList.push({detailId:null,recipeId:null,medicine:t,dose:null,remark:null}),this.yfdata.mainReList[e].recipeDetailList.push({detailId:null,recipeId:null,medicine:"",dose:null,remark:null}),this.yfdata.mainReList[e].recipeDetailList.push({detailId:null,recipeId:null,medicine:"",dose:null,remark:null}),this.yfdata.mainReList[e].recipeDetailList.push({detailId:null,recipeId:null,medicine:"",dose:null,remark:null}))}},updateViceMe:function(e,t,i){var n=!0,a=this.yfdata.mainReList[i].viceReList[t].viceRecipeDetailList;if(a&&a.length>0){for(var l in a)if(""==a[l].medicine){n=!1,this.$set(this.yfdata.mainReList[i].viceReList[t].viceRecipeDetailList[l],"medicine",e);break}n&&(this.yfdata.mainReList[i].viceReList[t].viceRecipeDetailList.push({detailId:null,recipeId:null,medicine:e,dose:null,remark:null}),this.yfdata.mainReList[i].viceReList[t].viceRecipeDetailList.push({detailId:null,recipeId:null,medicine:"",dose:null,remark:null}),this.yfdata.mainReList[i].viceReList[t].viceRecipeDetailList.push({detailId:null,recipeId:null,medicine:"",dose:null,remark:null}),this.yfdata.mainReList[i].viceReList[t].viceRecipeDetailList.push({detailId:null,recipeId:null,medicine:"",dose:null,remark:null}))}},updateAmount:function(e){this.allTotal=this.getAllTotal(this.yfdata)},updateZfAmount:function(e){var t=null,i=this.yfdata.mainReList;for(var n in i[e].viceReList){t+=i[e].viceReList[n].amount&&""!=i[e].viceReList[n].amount?parseInt(i[e].viceReList[n].amount):0}this.yfdata.mainReList[e].amount=t,this.updateAmount()},addfyfyw:function(e,t,i){console.log("新增副方的药物");var n=e.target.value;this.updateViceMe(n,t,i),e.target.value=""},addzyfyw:function(e,t){this.updateMainMe(t,e.target.value),e.target.value=""},addZyfff:function(e){var t=JSON.parse(d()(this.mbViceObj));0==this.yfdata.mainReList[e].viceReList.length?t.remarks="先用，与主方同用":1==this.yfdata.mainReList[e].viceReList.length?t.remarks="后用，与主方同用":t.remarks="最后用，与主方同用",this.yfdata.mainReList[e].viceReList.push(t),this.updateZfAmount(e),this.$common.openSuccessMsgBox("新增副方成功!",this)},normalYwArry:function(e){for(var t=JSON.parse(d()(e)),i=0;i<t.mainReList.length;i++){var n=this.IsMbYwArry(t.mainReList[i].recipeDetailList,1);if(t.mainReList[i].recipeDetailList=n,"[]"!=d()(t.mainReList[i].viceReList))for(var a=0;a<t.mainReList[i].viceReList.length;a++){var l=this.IsMbYwArry(t.mainReList[i].viceReList[a].viceRecipeDetailList,2);t.mainReList[i].viceReList[a].viceRecipeDetailList=l}}return t},setDefaultAmount:function(e){if(e&&e.mainReList&&"[]"!=d()(e.mainRelist))for(var t=0;t<e.mainReList.length;t++){var i=e.mainReList[t].amount;if("string"==typeof i&&(i=parseInt(i)),(!i||i<=0)&&(e.mainReList[t].amount=null),"[]"!=d()(e.mainReList[t].viceReList))for(var n=0;n<e.mainReList[t].viceReList.length;n++){var a=e.mainReList[t].viceReList[n].amount;"string"==typeof i&&(a=parseInt(a)),(!e.mainReList[t].viceReList[n].amount||a<=0)&&(e.mainReList[t].viceReList[n].amount=null)}}return e},IsMbYwArry:function(e,t){var i=12,n=JSON.parse(d()(e));if(2==t&&(i=8),"[]"==d()(e))for(var a=0;a<i;a++){var l={detailId:null,recipeId:null,medicine:"",dose:null,remark:null};n.push(l)}else for(;n.length<i||n.length%4!=0;){l={detailId:null,recipeId:null,medicine:"",dose:null,remark:null};n.push(l)}return n},arryEnd4null:function(e){for(var t=!0,i=e.length-1;i>e.length-5;i--)""!=e[i].medicine&&(t=!1);return t},updateMainYw:function(e,t){if(""==this.yfdata.mainReList[e].recipeDetailList[t].medicine){this.yfdata.mainReList[e].recipeDetailList.splice(t,1);this.yfdata.mainReList[e].recipeDetailList.push({detailId:null,recipeId:null,medicine:"",dose:null,remark:null});var i=this.yfdata.mainReList[e].recipeDetailList.length,n=this.arryEnd4null(this.yfdata.mainReList[e].recipeDetailList);i>=16&&n&&this.yfdata.mainReList[e].recipeDetailList.splice(i-4,4)}},updateViceYw:function(e,t,i){if(""==this.yfdata.mainReList[e].viceReList[t].viceRecipeDetailList[i].medicine){this.yfdata.mainReList[e].viceReList[t].viceRecipeDetailList.splice(i,1);this.yfdata.mainReList[e].viceReList[t].viceRecipeDetailList.push({detailId:null,recipeId:null,medicine:"",dose:null,remark:null});var n=this.yfdata.mainReList[e].viceReList[t].viceRecipeDetailList.length,a=this.arryEnd4null(this.yfdata.mainReList[e].viceReList[t].viceRecipeDetailList);n>=12&&a&&this.yfdata.mainReList[e].viceReList[t].viceRecipeDetailList.splice(n-4,4)}},newInquiry_new:function(){var e=this.$common.openLoading("新建问诊中,请稍等!",this),t=JSON.parse(window.localStorage.getItem("pathParams")).data.pId;this.$common.newInquiry_new(t,this),this.is_display_xjzd=!0,setTimeout(function(){e.close()},2500)}},beforeMount:function(){this.allTotal=this.getAllTotal(this.yfdata)},mounted:function(){},beforeDestroy:function(){}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bryf-container"},[i("div",{staticClass:"info-container"},[i("div",{staticClass:"wzwt-info-container"},[i("div",{staticClass:"titile-container"},[i("span",{on:{click:function(t){e.setActiveSyle(1)}}},[e._v("\n                    诊断标签\n                ")]),e._v(" "),i("span",[i("i",{class:[e.d_isActive?"el-icon-caret-top":"el-icon-caret-bottom"],on:{click:function(t){e.setActiveSyle(1)}}})]),e._v(" "),i("el-button",{staticClass:"btn-default",class:[{isdisplaynone:e.is_display_xjzd},"btn-default"],staticStyle:{"margin-left":"20px"},on:{click:e.newInquiry_new}},[e._v("新建问诊")])],1),e._v(" "),i("div",{class:[{isdisplaynone:e.d_isActive},"wzwt-input-container"]},[i("el-input",{staticClass:"bqms",attrs:{type:"textarea",rows:2,placeholder:"请输入诊断标签，以逗号分隔"},model:{value:e.diagnoseLabels,callback:function(t){e.diagnoseLabels=t},expression:"diagnoseLabels"}})],1)]),e._v(" "),i("div",{staticClass:"bqms-info-container"},[i("div",{staticClass:"titile-container",on:{click:function(t){e.setActiveSyle(2)}}},[i("span",[e._v("\n                    病情描述\n                ")]),e._v(" "),i("span",[i("i",{class:[e.b_isActive?"el-icon-caret-top":"el-icon-caret-bottom"]})])]),e._v(" "),i("div",{class:[{isdisplaynone:e.b_isActive},"bqms-input-container"]},[i("el-input",{staticClass:"bqms",attrs:{type:"textarea",rows:7,placeholder:"请输入病情描述"},model:{value:e.yfdata.description,callback:function(t){e.$set(e.yfdata,"description",t)},expression:"yfdata.description"}})],1)])]),e._v(" "),i("div",{staticClass:"yf-info-container"},[i("div",{staticClass:"yf-header-container"},[i("span",{staticClass:"brxm"},[e._v(e._s(e.yfdata.pName))]),e._v(" "),i("el-button",{staticClass:"btn-default",on:{click:e.addZf}},[e._v("加主方")]),e._v(" "),i("el-button",{staticClass:"btn-default btn-border-red",on:{click:e.clearAllYw}},[e._v("清除")]),e._v(" "),i("span",{staticClass:"person-info"},[e._v(e._s(e.getPersonInfo))])],1),e._v(" "),i("div",{staticClass:"mainReList-container-div"},[e._l(e.yfdata.mainReList,function(t,n){return i("div",{key:n,staticClass:"mainReList-container"},[i("div",{staticClass:"zf-search-info"},[i("span",{attrs:{name:"zfname"}},[e._v("主方"+e._s(n+1))]),i("el-input",{staticClass:"new-yfmc",nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.addzyfyw(t,n)}}}),i("el-input",{staticClass:"ywfs",on:{change:e.updateAmount},model:{value:t.amount,callback:function(i){e.$set(t,"amount",i)},expression:"item.amount"}}),i("span",[e._v("付")]),i("el-input",{staticClass:"ywbz",model:{value:t.remarks,callback:function(i){e.$set(t,"remarks",i)},expression:"item.remarks"}}),i("el-checkbox",{staticClass:"rk-checkbox",attrs:{name:"isStock"},model:{value:t.isStock,callback:function(i){e.$set(t,"isStock",i)},expression:"item.isStock"}},[e._v("入库")]),i("el-button",{staticClass:"btn-default",attrs:{type:"primary"},on:{click:function(t){e.addZyfff(n)}}},[e._v("加副方")]),i("el-button",{staticClass:"zf-btn-delete",attrs:{icon:"el-icon-delete"},on:{click:function(t){e.openMegBox("是否删除主方","deleteZf",n,"")}}})],1),e._v(" "),i("div",{staticClass:"mainMeList-container"},e._l(t.recipeDetailList,function(t,a){return i("div",{key:a,staticClass:"yp-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.medicine,expression:"h.medicine"}],domProps:{value:t.medicine},on:{blur:function(t){e.updateMainYw(n,a)},input:function(i){i.target.composing||e.$set(t,"medicine",i.target.value)}}})])})),e._v(" "),e._l(t.viceReList,function(t,a){return i("div",{key:a,staticClass:"viceReList-container"},[i("div",{staticClass:"zf-search-info"},[i("span",{attrs:{name:"zfname"}},[e._v("副方"+e._s(a+1))]),i("el-input",{staticClass:"new-yfmc",nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.addfyfyw(t,a,n)}}}),i("el-input",{staticClass:"ywfs",on:{change:function(t){e.updateZfAmount(n)}},model:{value:t.amount,callback:function(i){e.$set(t,"amount",i)},expression:"vice.amount"}}),i("span",[e._v("付")]),i("el-input",{staticClass:"ywbz",model:{value:t.remarks,callback:function(i){e.$set(t,"remarks",i)},expression:"vice.remarks"}}),i("el-checkbox",{staticClass:"rk-checkbox",attrs:{name:"isStock"},model:{value:t.isStock,callback:function(i){e.$set(t,"isStock",i)},expression:"vice.isStock"}},[e._v("入库")]),i("el-button",{staticClass:"zf-btn-delete",attrs:{icon:"el-icon-delete"},on:{click:function(t){e.openMegBox("是否删除副方","deleteFf",n,a)}}})],1),e._v(" "),i("div",{staticClass:"mainMeList-container"},e._l(t.viceRecipeDetailList,function(t,l){return i("div",{key:l,staticClass:"yp-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.medicine,expression:"vim.medicine"}],domProps:{value:t.medicine},on:{blur:function(t){e.updateViceYw(n,a,l)},input:function(i){i.target.composing||e.$set(t,"medicine",i.target.value)}}})])}))])})],2)}),e._v(" "),i("div",{staticClass:"yf-fs-info"},[i("span",[e._v("共计")]),e._v(" "),i("el-input",{staticClass:"yf-fs-all",model:{value:e.allTotal,callback:function(t){e.allTotal=t},expression:"allTotal"}}),e._v(" "),i("span",[e._v("付")])],1)],2),e._v(" "),i("div",{staticClass:"yf-foot-container"},[i("el-button",{class:[{isdisplaynone:e.is_display_zd},"btn-default btn-blue"],on:{click:e.submitYfData}},[e._v("完成诊断")]),e._v(" "),i("el-button",{class:[{isdisplaynone:e.is_display_fh},"btn-default"],on:{click:e.gotoLastPage}},[e._v("返回")])],1)])])},staticRenderFns:[]};var f=i("VU/8")(u,m,!1,function(e){i("v6PZ"),i("gi3s"),i("fTu6")},"data-v-42d350de",null);t.default=f.exports},v6PZ:function(e,t){}});
//# sourceMappingURL=0.c01f03e2fe19f5fe7ed4.js.map