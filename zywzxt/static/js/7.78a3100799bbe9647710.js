webpackJsonp([7],{"56lb":function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={data:function(){return{dialogpriceVisible:!1,search_obj:{},keyWords:"",medicinelist:[{medicineName:1,unitPrice:1,source:10,medicineId:""}]}},created:function(){document.title="药品管理",this.getmedicine()},methods:{getpricechange:function(){this.$http.get("/medicineManage/priceChange"),{params:{}}.then(function(e){e.code}).catch(function(e){console.log(e)})},removemedicine:function(e){var i=this;this.$confirm("确定删除此药品?","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then(function(){var t=i.medicinelist[e];i.$http.delete("/medicineManage/deleteMedicine",{params:{medicineId:t.medicineId}}).then(function(e){1==e.code&&i.getmedicine()}).catch(function(){i.$message.error("删除失败")})})},updatemedicine:function(){for(var e=this,i=0;i<e.medicinelist.length;i++)""!=e.medicinelist[i].medicineId&&null!=e.medicinelist[i].medicineId||(e.medicinelist[i].medicineId=e.medicinelist[i].medicineName),console.log("名字"+e.medicinelist[i].medicineName),console.log("Id"+e.medicinelist[i].medicineId),console.log("价格"+e.medicinelist[i].unitPrice),console.log("来源地"+e.medicinelist[i].source),console.log(i);this.$http.post("/medicineManage/updateMedicineList",this.medicinelist).then(function(i){"1"==i.code?(e.$common.openSuccessMsgBox("修改成功",e),this.getmedicine()):e.$common.openErrorMsgBox(i.msg,e)}).catch(function(e){console.log(e)})},searchmedicine:function(){var e=this,i=e.keyWords;console.log("参数",i),e.$http.get("/medicineManage/findMedicineList",{params:{keyWord:i}}).then(function(i){console.log(i),1==i.code?(e.medicinelist=i.data.medicinelist,console.log("药品"+this.medicinelist)):e.$common.openErrorMsgBox(i.msg,e)}).catch(function(i){e.$common.openErrorMsgBox(i,e)})},getmedicine:function(){var e=this;this.$http.get("/medicineManage/getMedicineList").then(function(i){1==i.code&&(e.medicinelist=i.data.medicinelist)}).catch(function(e){console.log(e)})},addRow:function(){this.medicinelist.push({medicineName:"",unitPrice:"",source:"",medicineId:""})},deleteRow:function(e,i){i.splice(e,1)},rowClassname:function(){return"rowClassname"},headerClassname:function(){return"headerClassname"},handleClick:function(e){console.log(e)}}},c={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"brgl-container"},[t("div",{staticClass:"search-row"},[t("div",{staticClass:"search-row-input-item"},[t("el-input",{attrs:{placeholder:"请输入药品名"},nativeOn:{keyup:function(i){return"button"in i||!e._k(i.keyCode,"enter",13,i.key,"Enter")?e.searchmedicine(i):null}},model:{value:e.keyWords,callback:function(i){e.keyWords=i},expression:"keyWords"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchmedicine},slot:"append"})],1)],1),e._v(" "),t("div",{staticClass:"addmedicine"},[t("el-button",{staticClass:"button-size",attrs:{type:"primary"},on:{click:function(i){e.addRow()}}},[e._v("药品新增")])],1)]),e._v(" "),t("div",{staticClass:"table-continer"},[t("el-table",{staticStyle:{border:"1px solid #ebeef5","overflow-y":"auto"},attrs:{data:e.medicinelist,"header-row-class-name":e.headerClassname,"row-class-name":e.rowClassname,stripe:""}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"150"}}),e._v(" "),t("el-table-column",{attrs:{prop:"medicineName",label:"药名",width:"250"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-input",{staticClass:"new-yfmc",model:{value:i.row.medicineName,callback:function(t){e.$set(i.row,"medicineName",t)},expression:"scope.row.medicineName"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"unitPrice",label:"价格（元/g）",width:"270"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-input",{staticClass:"new-yfmc",model:{value:i.row.unitPrice,callback:function(t){e.$set(i.row,"unitPrice",t)},expression:"scope.row.unitPrice"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"source",label:"来源",width:"500"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-input",{staticClass:"new-yfmc",model:{value:i.row.source,callback:function(t){e.$set(i.row,"source",t)},expression:"scope.row.source"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"600"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{staticClass:"btn-font-default bnt-font-color",attrs:{type:"text"},on:{click:function(t){e.removemedicine(i.$index)}}},[e._v("删除药品")]),e._v(" "),t("el-button",{staticClass:"btn-font-default bnt-font-color",attrs:{type:"text"},on:{click:function(i){e.dialogpriceVisible=!0}}},[e._v("价格走势")])]}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"价格走势",visible:e.dialogpriceVisible},on:{"update:visible":function(i){e.dialogpriceVisible=i}}},[t("div",{staticStyle:{width:"500px",height:"500px"},attrs:{id:"price"}})])],1),e._v(" "),t("div",{staticClass:"foot"},[t("el-button",{staticClass:"button-size",attrs:{type:"primary"},on:{click:e.updatemedicine}},[e._v("确认修改")])],1)])},staticRenderFns:[]};var o=t("VU/8")(n,c,!1,function(e){t("xDyy"),t("qe3m")},null,null);i.default=o.exports},qe3m:function(e,i){},xDyy:function(e,i){}});
//# sourceMappingURL=7.78a3100799bbe9647710.js.map