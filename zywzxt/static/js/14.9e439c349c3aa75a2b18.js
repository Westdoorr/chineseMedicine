webpackJsonp([14],{s4Ch:function(t,e){},suDj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),l=(a("mw3O"),{data:function(){return{yytjpage:"yytjpage",wzqkpage:"wzqkpage",rangeDate:null,search_obj:{pname:null,startDate:null,endDate:null,keyWords:null,patientId:null,pageNum:1,pageSize:10},multipleSelectionAll:[],multipleSelection:[],idKey:"inquiryId",tableData:{list:[],pageNum:1,pageSize:10,total:0}}},computed:{},watch:{rangeDate:function(t,e){this.search_obj.startDate=this.$common.dateFormatStr(this.rangeDate[0],"yyyy-MM-dd"),this.search_obj.endDate=this.$common.dateFormatStr(this.rangeDate[1],"yyyy-MM-dd")}},created:function(){this.initPage()},methods:{rowClassname:function(){return"rowClassname"},headerClassname:function(){return"headerClassname"},handleClick:function(t){console.log(t)},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.changePageCoreRecordData(),this.search_obj.pageNum=t,this.getblList()},handleSelectionChange:function(t){var e=this;this.multipleSelection=t,setTimeout(function(){e.changePageCoreRecordData()},50)},setSelectRow:function(){if(this.multipleSelectionAll&&!(this.multipleSelectionAll.length<=0)){var t=this.idKey,e=[];this.multipleSelectionAll.forEach(function(a){e.push(a[t])}),this.$refs.table.clearSelection();for(var a=0;a<this.tableData.list.length;a++)e.indexOf(this.tableData.list[a][t])>=0&&this.$refs.table.toggleRowSelection(this.tableData.list[a],!0)}},changePageCoreRecordData:function(){var t=this.idKey,e=this;if(this.multipleSelectionAll.length<=0)this.multipleSelectionAll=this.multipleSelection;else{var a=[];this.multipleSelectionAll.forEach(function(e){a.push(e[t])});var n=[];this.multipleSelection.forEach(function(i){n.push(i[t]),a.indexOf(i[t])<0&&e.multipleSelectionAll.push(i)});var i=[];this.tableData.list.forEach(function(e){n.indexOf(e[t])<0&&i.push(e[t])}),i.forEach(function(n){if(a.indexOf(n)>=0)for(var i=0;i<e.multipleSelectionAll.length;i++)if(e.multipleSelectionAll[i][t]==n){e.multipleSelectionAll.splice(i,1);break}})}},initPage:function(){var t=JSON.parse(window.localStorage.getItem("pathParams"));""!=t.data.pname&&(this.search_obj.pname=t.data.pname),t.data.pageNum&&(this.search_obj.pageNum=t.data.pageNum),t.data.pageSize&&(this.search_obj.pageSize=t.data.pageSize),t.data.keyWords&&(this.search_obj.keyWords=t.data.keyWords),t.data.startDate&&(this.search_obj.startDate=t.data.startDate),t.data.endDate&&(this.search_obj.endDate=t.data.endDate),t.data.patientId&&(this.search_obj.patientId=t.data.patientId),this.getblList()},getblList:function(){var t=this,e=this.search_obj;t.$http.get("/MrManage/getMrList",{params:e}).then(function(e){"1"==e.code?"[]"!=i()(e.data.pageInfo.list)&&(t.tableData=e.data.pageInfo,setTimeout(function(){t.setSelectRow()},50)):t.$common.openErrorMsgBox(e.msg,t)}).catch(function(e){t.$common.openErrorMsgBox(e,t)})},gotoWzxxPage:function(t){var e={pId:t.pId,inquiryId:t.inquiryId},a=new Object;a.path="wjxxpage",a.data=e,this.$store.dispatch("setPathParams",i()(a));var n=new Object;n.path="blglpage",n.data=this.search_obj,this.$store.dispatch("setPrePathParams",i()(n)),this.$common.GotoPage("wjxxpage",e,this)},delDailyPatient:function(t){var e=this,a=e.$common.openLoading("删除病历!",e);e.$http.delete("/MrManage/deleteDailyPatient?inquiryid="+t.inquiryId).then(function(t){a.close(),"1"==t.code&&(e.$common.openSuccessMsgBox("删除成功",e),e.getblList())}).catch(function(t){a.close(),e.$common.openErrorMsgBox(t,e)})},gotoyfpage:function(t){var e={pId:t.pId,inquiryId:t.inquiryId,lastinquiryId:""},a=new Object;a.path="bryfpage",a.data=e,this.$store.dispatch("setPathParams",i()(a));var n=new Object;n.path="blglpage",n.data=this.search_obj,this.$store.dispatch("setPrePathParams",i()(n)),this.$common.GotoPage("bryfpage",e,this)},exportBlList:function(){var t=this,e=new Array,a={inquiryIdList:"",all:!1,patientId:null};if("[]"==i()(this.multipleSelectionAll))return t.$common.openErrorMsgBox("请选中要导出的病历信息",t),!1;for(var n=0;n<this.multipleSelectionAll.length;n++)e.push(this.multipleSelectionAll[n].inquiryId);a.inquiryIdList=e,console.log(i()(a));var l=t.$common.openLoading("病历导出中，请耐心等待",t);t.$http.post("/dataStatistics/getInquiryInfoList",a).then(function(e){l.close(),"1"==e.code&&"{}"!=i()(e.data)?e.data.inquiryInfo&&"{}"!=i()(e.data.inquiryInfo)&&t.$exportPrint(e.data.inquiryInfo,{}):t.$common.openErrorMsgBox(e.msg,t)}).catch(function(e){l.close(),t.$common.openErrorMsgBox(e,t)})}}}),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"blgl-container"},[a("div",{staticClass:"search-row"},[a("div",{staticClass:"search-input-item"},[a("el-input",{staticStyle:{width:"300px","margin-right":"40px"},attrs:{placeholder:"输入病人名字"},model:{value:t.search_obj.pname,callback:function(e){t.$set(t.search_obj,"pname",e)},expression:"search_obj.pname"}})],1),t._v(" "),a("div",{staticClass:"search-range-date-item"},[a("el-date-picker",{staticClass:"rq-input",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),t._v(" "),a("div",{staticClass:"search-input-item"},[a("el-input",{staticStyle:{width:"435px","margin-right":"40px"},attrs:{placeholder:"输入关键字"},model:{value:t.search_obj.keyWords,callback:function(e){t.$set(t.search_obj,"keyWords",e)},expression:"search_obj.keyWords"}})],1),t._v(" "),a("div",{staticClass:"search-row-btn-group"},[a("el-button",{staticClass:"btn-default btn-deault-size btn-color-blue",on:{click:t.getblList}},[t._v("查询")])],1)]),t._v(" "),a("div",{staticClass:"table-continer"},[a("el-table",{ref:"table",staticStyle:{border:"1px solid #ebeef5","overflow-y":"auto",height:"100%"},attrs:{data:t.tableData.list,"header-row-class-name":t.headerClassname,"row-class-name":t.rowClassname,stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"96"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pName",label:"姓名",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inquiryDate",label:"就诊时间",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"residence",label:"来源地",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"btn-font-default bnt-font-color",attrs:{type:"text"},on:{click:function(a){t.delDailyPatient(e.row)}}},[t._v("删除病历")]),t._v(" "),a("el-button",{staticClass:"btn-font-default",attrs:{type:"text"},on:{click:function(a){t.gotoWzxxPage(e.row)}}},[t._v("查看四诊")]),t._v(" "),a("el-button",{staticClass:"btn-font-default",attrs:{type:"text"},on:{click:function(a){t.gotoyfpage(e.row)}}},[t._v("查看病历")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"foot-container"},[a("div",{staticClass:"page-container"},[a("el-pagination",{attrs:{background:"","current-page":t.tableData.pageNum,"page-size":t.tableData.pageSize,layout:"total, prev, pager, next, jumper",total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticClass:"search-row-btn-group"},[a("el-button",{staticClass:"btn-default btn-deault-size btn-color-blue",on:{click:t.exportBlList}},[t._v("导出病历")])],1)])])},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(t){a("s4Ch")},null,null);e.default=s.exports}});
//# sourceMappingURL=14.9e439c349c3aa75a2b18.js.map