webpackJsonp([15],{"3pvo":function(t,e){},suDj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),o=(a("mw3O"),{data:function(){return{yytjpage:"yytjpage",wzqkpage:"wzqkpage",rangeDate:null,search_obj:{pname:null,startDate:null,endDate:null,keyWords:null,patientId:null,pageNum:1,pageSize:10,startAge:"",endAge:"",residence:"",gender:""},multipleSelectionAll:[],multipleSelection:[],idKey:"inquiryId",tableData:{list:[],pageNum:1,pageSize:10,total:0},pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()}}}},computed:{},watch:{rangeDate:function(t,e){this.search_obj.startDate=this.$common.dateFormatStr(this.rangeDate[0],"yyyy-MM-dd"),this.search_obj.endDate=this.$common.dateFormatStr(this.rangeDate[1],"yyyy-MM-dd")}},created:function(){this.initPage()},methods:{changeDate:function(t){console.log(t);""!=t&&null!=t||(this.search_obj.startDate=null,this.search_obj.endDate=null,this.rangeDate=null)},typeIndex:function(t){return console.log("序号：",t),t+(this.pageNum-1)*this.pageSize+1},rowClassname:function(){return"rowClassname"},headerClassname:function(){return"headerClassname"},handleClick:function(t){console.log(t)},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.changePageCoreRecordData(),this.search_obj.pageNum=t,this.getblList()},handleSelectionChange:function(t){var e=this;this.multipleSelection=t,setTimeout(function(){e.changePageCoreRecordData()},50)},setSelectRow:function(){if(this.multipleSelectionAll&&!(this.multipleSelectionAll.length<=0)){var t=this.idKey,e=[];this.multipleSelectionAll.forEach(function(a){e.push(a[t])}),this.$refs.table.clearSelection();for(var a=0;a<this.tableData.list.length;a++)e.indexOf(this.tableData.list[a][t])>=0&&this.$refs.table.toggleRowSelection(this.tableData.list[a],!0)}},changePageCoreRecordData:function(){var t=this.idKey,e=this;if(this.multipleSelectionAll.length<=0)this.multipleSelectionAll=this.multipleSelection;else{var a=[];this.multipleSelectionAll.forEach(function(e){a.push(e[t])});var n=[];this.multipleSelection.forEach(function(i){n.push(i[t]),a.indexOf(i[t])<0&&e.multipleSelectionAll.push(i)});var i=[];this.tableData.list.forEach(function(e){n.indexOf(e[t])<0&&i.push(e[t])}),i.forEach(function(n){if(a.indexOf(n)>=0)for(var i=0;i<e.multipleSelectionAll.length;i++)if(e.multipleSelectionAll[i][t]==n){e.multipleSelectionAll.splice(i,1);break}})}},initPage:function(){var t=JSON.parse(window.localStorage.getItem("pathParams"));""!=t.data.pname&&(this.search_obj.pname=t.data.pname),t.data.pageNum&&(this.search_obj.pageNum=t.data.pageNum),t.data.pageSize&&(this.search_obj.pageSize=t.data.pageSize),t.data.keyWords&&(this.search_obj.keyWords=t.data.keyWords),t.data.startDate&&(this.search_obj.startDate=t.data.startDate),t.data.endDate&&(this.search_obj.endDate=t.data.endDate),t.data.patientId&&(this.search_obj.patientId=t.data.patientId),t.data.startAge&&(this.search_obj.startAge=t.data.startAge),t.data.endAge&&(this.search_obj.endAge=t.data.endAge),t.data.residence&&(this.search_obj.residence=t.data.residence),t.data.gender&&(this.search_obj.gender=t.data.gender),this.getblList()},opencomfigMethod:function(t,e,a){this.$common.openComfigDialog(t,e,a,this)},getblList:function(){var t=this,e=this.search_obj;console.log("参数",e);t.$http.get("/MrManage/getMrList",{params:e}).then(function(e){console.log(e),"1"==e.code?(t.tableData=e.data.pageInfo,console.log(t.tableData),setTimeout(function(){t.setSelectRow()},50)):t.$common.openErrorMsgBox(e.msg,t)}).catch(function(e){t.$common.openErrorMsgBox(e,t)})},gotoWzxxPage:function(t){var e={pId:t.pId,inquiryId:t.inquiryId},a=new Object;a.path="wjxxpage",a.data=e,this.$store.dispatch("setPathParams",i()(a));var n=new Object;n.path="blglpage",n.data=this.search_obj,this.$store.dispatch("setPrePathParams",i()(n)),this.$common.GotoPage("wjxxpage",e,this)},delDailyPatient:function(t){var e=this,a=e.$common.openLoading("删除病历!",e);e.$http.delete("/MrManage/deleteDailyPatient?inquiryid="+t.inquiryId).then(function(t){a.close(),"1"==t.code&&(e.$common.openSuccessMsgBox("删除成功",e),e.getblList())}).catch(function(t){a.close(),e.$common.openErrorMsgBox(t,e)})},gotoyfpage:function(t){var e={pId:t.pId,inquiryId:t.inquiryId,lastinquiryId:""},a=new Object;a.path="bryfpage",a.data=e,this.$store.dispatch("setPathParams",i()(a));var n=new Object;n.path="blglpage",n.data=this.search_obj,this.$store.dispatch("setPrePathParams",i()(n)),this.$common.GotoPage("bryfpage",e,this)},exportBlList:function(){var t=this,e=new Array,a={inquiryIdList:"",all:!1,patientId:null};if("[]"==i()(this.multipleSelectionAll))return t.$common.openErrorMsgBox("请选中要导出的病历信息",t),!1;for(var n=0;n<this.multipleSelectionAll.length;n++)e.push(this.multipleSelectionAll[n].inquiryId);a.inquiryIdList=e,console.log(i()(a));var o=t.$common.openLoading("病历导出中，请耐心等待",t);t.$http.post("/dataStatistics/getInquiryInfoList",a).then(function(e){o.close(),"1"==e.code&&"{}"!=i()(e.data)?e.data.inquiryInfo&&"{}"!=i()(e.data.inquiryInfo)&&t.$exportPrint(e.data.inquiryInfo,{}):t.$common.openErrorMsgBox(e.msg,t)}).catch(function(e){o.close(),t.$common.openErrorMsgBox(e,t)})},exportWord:function(){var t=this,e={inquiryIdList:[],all:!1,patientId:null};if("[]"==i()(this.multipleSelectionAll))return t.$common.openErrorMsgBox("请选中要导出的病历信息",t),!1;for(var a=0;a<this.multipleSelectionAll.length;a++)e.inquiryIdList.push(this.multipleSelectionAll[a].inquiryId);console.log(e);var n="/index/getPatientInfoWord?all=false";e.inquiryIdList.forEach(function(t){n+="&inquiryIdList="+t}),console.log(n);var o=t.$common.openLoading("病历word文档导出中，请耐心等待",t);t.$http.post(n,{}).then(function(t){console.log(t),o.close();var e=new Blob([t],{type:"application/msword"}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.setAttribute("download","病人病例"),document.body.appendChild(n),n.click()}).catch(function(e){o.close(),t.$common.openErrorMsgBox(e,t)})}}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"blgl-container"},[a("div",{staticClass:"search-row"},[a("div",{staticClass:"search-input-item"},[a("el-input",{staticStyle:{width:"180px","margin-right":"10px","margin-left":"1px"},attrs:{placeholder:"病人姓名"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getblList(e):null}},model:{value:t.search_obj.pname,callback:function(e){t.$set(t.search_obj,"pname",e)},expression:"search_obj.pname"}})],1),t._v(" "),a("div",{staticClass:"search-input-item"},[a("el-input",{staticStyle:{width:"180px","margin-right":"10px","margin-left":"1px"},attrs:{placeholder:"性别"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getblList(e):null}},model:{value:t.search_obj.gender,callback:function(e){t.$set(t.search_obj,"gender",e)},expression:"search_obj.gender"}})],1),t._v(" "),a("div",{staticClass:"search-input-item"},[a("el-input",{staticStyle:{width:"180px","margin-right":"10px","margin-left":"1px"},attrs:{placeholder:"来源地"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getblList(e):null}},model:{value:t.search_obj.residence,callback:function(e){t.$set(t.search_obj,"residence",e)},expression:"search_obj.residence"}})],1),t._v(" "),a("div",{staticClass:"search-input-item"},[a("el-input",{staticStyle:{width:"127px","margin-right":"10px","margin-left":"1px",display:"inline-block"},attrs:{placeholder:"年龄"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getblList(e):null}},model:{value:t.search_obj.startAge,callback:function(e){t.$set(t.search_obj,"startAge",e)},expression:"search_obj.startAge"}}),t._v("-\n            "),a("el-input",{staticStyle:{width:"127px","margin-right":"10px","margin-left":"1px"},attrs:{placeholder:"年龄"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getblList(e):null}},model:{value:t.search_obj.endAge,callback:function(e){t.$set(t.search_obj,"endAge",e)},expression:"search_obj.endAge"}})],1),t._v(" "),a("div",{staticClass:"search-range-date-item search-input-item1"},[a("el-date-picker",{staticClass:"rq-input",attrs:{"picker-options":t.pickerOptions1,type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy/MM/dd"},on:{change:t.changeDate},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getblList(e):null}},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),t._v(" "),a("div",{staticClass:"search-input-item"},[a("el-input",{staticStyle:{width:"300px","margin-right":"40px"},attrs:{placeholder:"输入关键字"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getblList(e):null}},model:{value:t.search_obj.keyWords,callback:function(e){t.$set(t.search_obj,"keyWords",e)},expression:"search_obj.keyWords"}})],1),t._v(" "),a("div",{staticClass:"search-row-btn-group"},[a("el-button",{staticClass:"btn-default btn-deault-size btn-color-blue",on:{click:t.getblList}},[t._v("查询")])],1)]),t._v(" "),a("div",{staticClass:"table-continer"},[a("el-table",{ref:"table",staticStyle:{border:"1px solid #ebeef5","overflow-y":"auto",height:"100%",width:"100%"},attrs:{data:t.tableData.list,"header-row-class-name":t.headerClassname,"row-class-name":t.rowClassname,stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"index",width:"90px",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.$index+(t.tableData.pageNum-1)*t.tableData.pageSize+1)+" ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pName",label:"姓名",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"firstDate",label:"初次就诊时间",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inquiryDate",label:"就诊时间",width:"210"}}),t._v(" "),a("el-table-column",{attrs:{prop:"times",label:"第几次",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"residence",label:"来源地",width:"260"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"510"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"btn-font-default bnt-font-color",attrs:{type:"text"},on:{click:function(a){t.opencomfigMethod("请确认删除病例",t.delDailyPatient,e.row)}}},[t._v("删除病历")]),t._v(" "),a("el-button",{staticClass:"btn-font-default",attrs:{type:"text"},on:{click:function(a){t.gotoWzxxPage(e.row)}}},[t._v("查看四诊")]),t._v(" "),a("el-button",{staticClass:"btn-font-default",attrs:{type:"text"},on:{click:function(a){t.gotoyfpage(e.row)}}},[t._v("查看病历")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"foot-container"},[a("div",{staticClass:"page-container"},[a("el-pagination",{attrs:{background:"","current-page":t.tableData.pageNum,"page-size":t.tableData.pageSize,layout:"total, prev, pager, next, jumper",total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticClass:"search-row-btn-group"},[a("el-button",{staticClass:"btn-default btn-deault-size btn-color-blue",on:{click:t.exportBlList}},[t._v("导出病历")]),t._v(" "),a("el-button",{staticClass:"btn-default btn-deault-size btn-color-blue",on:{click:t.exportWord}},[t._v("导出word")])],1)])])},staticRenderFns:[]};var s=a("VU/8")(o,l,!1,function(t){a("3pvo")},null,null);e.default=s.exports}});
//# sourceMappingURL=15.d9f8d179ca71b6e86a2c.js.map